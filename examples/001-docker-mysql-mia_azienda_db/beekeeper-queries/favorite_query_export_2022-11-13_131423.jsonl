{"id":1,"createdAt":"2022-11-12 16:20:39.488","updatedAt":"2022-11-12 19:17:32","version":12,"title":"01_create_tables","text":"CREATE TABLE IF NOT EXISTS rapporto_clienti(\n  id_rapporto int NOT NULL AUTO_INCREMENT,\n  id_dipendente int NOT NULL,\n  id_cliente int NOT NULL,\n  PRIMARY KEY(id_rapporto)\n);\n\nCREATE TABLE IF NOT EXISTS uffici(\n  id_ufficio int NOT NULL AUTO_INCREMENT,\n  nome varchar(255) NOT NULL UNIQUE,\n  PRIMARY KEY(id_ufficio)\n);\n\nCREATE TABLE IF NOT EXISTS dipendenti(\n  id_dipendente int UNSIGNED NOT NULL AUTO_INCREMENT REFERENCES rapporto_clienti(id_dipendente), \n  nome varchar(255) NOT NULL, \n  cognome varchar(255) NOT NULL, \n  data_assunzione date NOT NULL, \n  stipendio decimal NOT NULL CHECK(stipendio >= 1200 AND stipendio <= 5000),\n  telefono varchar(10) NOT NULL UNIQUE,\n  id_ufficio int REFERENCES uffici(id_ufficio),\n  PRIMARY KEY(id_dipendente)\n);\n\nCREATE TABLE IF NOT EXISTS clienti(\n  id_cliente int UNSIGNED NOT NULL AUTO_INCREMENT REFERENCES repporto_clienti(id_cliente),\n  denominazione varchar(255) NOT NULL,\n  p_iva varchar(16) NOT NULL UNIQUE,\n  indirizzo varchar(255) NOT NULL,\n  telefono varchar(10) NOT NULL UNIQUE,\n  PRIMARY KEY(id_cliente)\n);\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":2,"createdAt":"2022-11-12 17:09:13.276","updatedAt":"2022-11-12 18:37:05","version":8,"title":"03_create_record_cliente","text":"/* \n * Create a record\n */\n\nINSERT INTO clienti \n(denominazione, p_iva, indirizzo, telefono)\nVALUES\n(\"Xyz Casa\", \"2542376584\", \"Via roma, Mantova\", \"0543566969\"),\n(\"Abc Informa\", \"1542376584\", \"Via mauri, Parma\", \"0511523954\");\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":3,"createdAt":"2022-11-12 17:16:07.042","updatedAt":"2022-11-12 18:36:34","version":2,"title":"02_drop_tables","text":"DROP TABLE clienti, dipendenti, rapporto_clienti;\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":4,"createdAt":"2022-11-12 17:53:05.263","updatedAt":"2022-11-12 18:46:27","version":5,"title":"04_r_","text":"SELECT *\nFROM dipendenti\nWHERE dipendenti.stipendio > 1900;\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":5,"createdAt":"2022-11-12 18:03:51.428","updatedAt":"2022-11-12 19:24:46","version":3,"title":"03_create_record_dipendenti","text":"\nINSERT INTO dipendenti \n(nome, cognome, data_assunzione, stipendio, telefono, id_ufficio)\nVALUES\n(\"Luca\", \"Rossi\", \"2022-10-12\", 2000, \"3822347688\", 1),\n(\"Mario\", \"Verdi\", \"2022-07-27\", 1600, \"3491847658\", 2),\n(\"Paola\", \"Blu\", \"2018-03-12\", 1900, \"3497637618\", 2),\n(\"Maria\", \"Maggio\", \"2017-07-20\", 1300, \"3495712658\", 3);\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":6,"createdAt":"2022-11-12 18:12:47.596","updatedAt":"2022-11-12 18:46:32","version":4,"title":"05_r_IN_BETWEEN","text":"SELECT * \nFROM dipendenti\nWHERE dipendenti.nome IN ('Luca', 'Paolo');\n\nSELECT * \nFROM dipendenti\nWHERE dipendenti.data_assunzione BETWEEN \"2022-01-01\" AND \"2022-06-01\";\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":7,"createdAt":"2022-11-12 18:21:54.417","updatedAt":"2022-11-12 18:46:40","version":5,"title":"06_r_ORDER_BY","text":"SELECT * \nFROM dipendenti\nORDER BY dipendenti.stipendio DESC;\n\nSELECT * \nFROM dipendenti\nORDER BY dipendenti.data_assunzione ASC;\n\nSELECT * \nFROM dipendenti\nORDER BY dipendenti.nome, dipendenti.cognome ASC;\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":8,"createdAt":"2022-11-12 18:27:36.348","updatedAt":"2022-11-12 18:46:46","version":5,"title":"07_r_LIMIT","text":"SELECT * \nFROM dipendenti\nORDER BY dipendenti.stipendio DESC\nLIMIT 1;\n\nSELECT * \nFROM dipendenti\nORDER BY dipendenti.stipendio DESC\nLIMIT 1, 2;\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":9,"createdAt":"2022-11-12 18:38:41.018","updatedAt":"2022-11-12 18:46:52","version":2,"title":"08_r_DISTINCT","text":"SELECT DISTINCT dipendenti.mansione\nFROM dipendenti;\n\nSELECT COUNT(dipendenti.mansione)\nFROM dipendenti;\n\nSELECT COUNT(DISTINCT dipendenti.mansione)\nFROM dipendenti;\n\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":10,"createdAt":"2022-11-12 18:43:20.843","updatedAt":"2022-11-12 18:55:45","version":2,"title":"09_u_","text":"UPDATE clienti\nSET clienti.indirizzo = 'Viale Magenta, Milano'\nWHERE clienti.id_cliente LIKE 9;\n\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":11,"createdAt":"2022-11-12 18:51:34.007","updatedAt":"2022-11-12 18:51:34.007","version":1,"title":"10_d_","text":"DELETE \nFROM dipendenti\nWHERE dipendenti.id_dipendente LIKE 7;\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":12,"createdAt":"2022-11-12 19:18:00.880","updatedAt":"2022-11-12 19:18:00.880","version":1,"title":"03_create_record_uffici","text":"\nINSERT INTO uffici \n(nome)\nVALUES\n(\"Amministrazione\"),\n(\"Servizio Clienti\"),\n(\"Risorse Umane\"),\n(\"Vendite\");\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":13,"createdAt":"2022-11-12 19:26:02.598","updatedAt":"2022-11-13 10:00:01","version":3,"title":"11_r_JOIN","text":"SELECT dipendenti.id_dipendente, dipendenti.nome, uffici.nome\nFROM dipendenti RIGHT JOIN uffici\nON dipendenti.id_ufficio LIKE uffici.id_ufficio;\n\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":14,"createdAt":"2022-11-13 10:12:28.456","updatedAt":"2022-11-13 10:17:54","version":2,"title":"12_r_ALIAS","text":"SELECT d.id_dipendente, d.nome, d.cognome\nFROM dipendenti AS d;\n\nSELECT d.id_dipendente, d.nome, d.cognome, u.nome AS 'nome_ufficio'\nFROM dipendenti AS d INNER JOIN uffici AS u\nON d.id_ufficio LIKE u.id_ufficio;\n\nSELECT \n  d.nome,\n  d.cognome, \n  u.nome AS 'nome_ufficio',\n  DATE_FORMAT(d.data_assunzione, '%e %M, %Y') AS 'giorno_assunzione'\nFROM dipendenti AS d INNER JOIN uffici AS u\nON d.id_ufficio LIKE u.id_ufficio;\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":15,"createdAt":"2022-11-13 10:22:15.301","updatedAt":"2022-11-13 10:22:15.301","version":1,"title":"13_r_GROUP_BY_n_HAVING","text":"SELECT \n  u.nome AS 'nome_ufficio',\n  COUNT(d.id_dipendente) AS 'numero_dipendenti'\nFROM uffici AS u \nLEFT JOIN dipendenti AS d\nON d.id_ufficio LIKE u.id_ufficio\nGROUP BY u.nome;\n\nSELECT \n  u.nome AS 'nome_ufficio',\n  COUNT(d.id_dipendente) AS 'numero_dipendenti'\nFROM uffici AS u \nLEFT JOIN dipendenti AS d\nON d.id_ufficio LIKE u.id_ufficio\nGROUP BY u.nome\nHAVING numero_dipendenti > 0;","database":"[blank]","connectionHash":"DEPRECATED"}
{"id":16,"createdAt":"2022-11-13 10:36:40.107","updatedAt":"2022-11-13 10:36:40.107","version":1,"title":"14_v_CREATE_VIEW","text":"CREATE VIEW view_uffici_per_dipendenti AS\nSELECT \n  u.nome AS 'ufficio_nome',\n  COUNT(d.id_dipendente) AS 'numero_dipendenti'\nFROM uffici AS u\nINNER JOIN dipendenti AS d\nON d.id_ufficio = u.id_ufficio\nGROUP BY ufficio_nome\nHAVING numero_dipendenti > 0\nORDER BY numero_dipendenti DESC\n;\n\n\n\n\n\n\n\n\n","database":"[blank]","connectionHash":"DEPRECATED"}
